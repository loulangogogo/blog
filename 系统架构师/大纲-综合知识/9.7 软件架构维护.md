## 软件架构维护

### 一、软件架构知识管理

#### (一)、架构知识的定义、管理的含义、管理的需求和管理现状

1. **架构知识的定义**

> Lago等人给出了架构知识的定义:架构知识=架构设计+架构设计决策。即需要说明在进 行架构设计时采用此种架构的原因。

2. **架构管理的含义**

> 架构知识管理侧重于软件开发和实现过程所涉及的架构静态演化，从架构文档等信息来源中捕捉架构知识，进而提供脚骨的质量属性及其涉及依据以进行记录和评价。架构知识管理不仅要涵盖脚骨的解决方案，也要涵盖产生该方案的架构设计决策、设计依据与其他信息，以有助于架构进一步演化。

3. **架构知识的管理需求**

> 许多人认为架构知识的可获得性能够极大的提升软件开发流程。如果对架构知识不进行管理的话，那么关键的设计知识就会 “沉没” 在软件架构中，如果开发人员发生变动，那么“沉没”的架构知识就会 “腐蚀”。

4. **架构知识管理的现状**

> 对于软件架构知识的讨论侧重于对架构信息的整理、存储和恢复。尽管如此，当前尚无实 用的架构知识整理策略，构建架构的利益相关者(即拥有架构知识的人)通常不会使用文档来 记录架构知识，原因在于对架构知识文档化和维护的动机不足:其好处看起来不够重大而成本 相对较高;利益相关者对工程的短期兴趣比起长远的架构知识重用显得更重要;开发者被设计
> 中的创造性工作所吸引，而不会反思设计决策的长远影响;缺乏此方面的培训。更为严重的是， 即使实现了文档化，通常架构知识也不能在整个组织中得到充分的分享。例如，架构知识没有 传播给合适的利益相关者;架构知识的接收者没有将之应用于他们的任务之中;知识笨重，难 以在应用的时候快速地搜索和定位到合适的知识。



### 二、软件架构修改管理

#### (一)、隔离区域

> 在软件架构修改管理中，一个主要的做法就是建立一个隔离区域，保障该区域中任何修改对其他部分的影响比较小，甚至没有影响。为此，需要明确修改规则，修改类型，以及可能影响范围和副作用等。



### 三、软件架构版本管理

#### (一)、软件架构版本管理的作用

> 软件架构版本管理为软件架构演化的版本演化控制、使用和评价等提供了可靠的依据，并为架构演化量化度奠定了基础。

### 四、软件架构可维护性度量实践

#### (一)、架构的圈复杂度（CCN）

> 事务处理行为，组件图能够通过组件之间的控制依赖关系来体现整个系统的组成结构。对 架构的组件图进行圈复杂度的度量，可以对整个系统的复杂程度做出初步评估，在设计早期发 现问题和做出调整，并预测待评估系统的测试复杂度，及早规避风险，提高软件质量。圈复杂度高的程序往往是最容易出现错误的程序，实践表明程序规模以 CCN 《= 10 为最宜。

#### (二)、扇入扇出度（FFC）

> 用该模块的上级模块的个数，扇出指该模块直接调用的下级模块的个数。本文中用扇入扇 出度综合评估组件主动调用以及被调用的频率。扇入扇出度越大，表明该组件与其他组件间的 接口关联或依赖关联越多。从图10-20和图10-21中可以发现， RSApplication、WebApplication及MainInterface 的关联关系最多， F F C度量值最大，而User、DB 等组件与其他组件关联较少， F F C 度量值也较小，验证了度量模型和结果的一致性。

#### (三)、模块间耦合度（CBO）

> 基于W e b读写系统的各个组件的C B O度量值按照从高到低显示在图10-22中。模块间 耦合度C B O度量模块与其他模块交互的频繁程度。 C B O越大的模块，越容易受到其他模块 中修改和错误的影响，因而可维护性越差，风险越高。一般来说，组件与其他组件的依赖关系及接口越多，该组件的耦合度越大。从图10-20和图10-22中可以发现，RSApplication、 WebApplication等关联关系较多的组件，其C B O度量值也较大;反之， User、DB等与其他组 件关联较少的组件，其 C B O 度量值也较小

#### (四)、模块的响应（RFC）

> 基于W e b读写系统的各个组件的 R F C度量值按照从高到低显示在图10-23中。 R F C度量组 件执行所需的功能的数量，包括接口提供的功能、依赖的其他模块提供的功能以及子模块提供的功能。从图10-20和图10-23中观察， ClientApplication包含子模块， Mainlnterface对其他组 件的依赖较多，因而它们的R F C度量值较大;而DB、RemoteDB、LocalDB等没有对其他模块 的依赖和调用，且不包含子模块，因而其 R F C 度量值为0

#### (五)、紧内聚度（TCC）- 松内聚度（LCC）

> 由于只有组件ClientApplication 具有子模块，因而对该组件进行度量，并将该组件的度量 值作为待评估系统的最终结果。好的架构设计应该遵循“高内聚-低耦合”原则，提高模块的 独立性，降低模块间接口调用的复杂性。