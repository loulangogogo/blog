## 关系数据库

### 一、关系数据库基本概念

#### (一)、关系数据库的定义及发展

> 关系数据库系统是支持关系数据模型的数据库系统。关系数据库应用数学方法来处理数据 库中的数据（关系模型是关系 数据库的基础，由关系数据结构、关系操作集合和关系完整性规则3部分组成）。

> 最早提出将这类方法用于数据处理的是1962年 CODASYL 发表的“信息代数” 一文，之后1968年David Child在7090机上实现了集合论数据结构，但系统而严格地提出关系 模型的是美国 I B M 公司的 E.F.Codd

#### (二)、基本术语（属性、域、目或度和候选码）

- **属性**： 在现实世界中，要描述一个事物常常取若干特征来表示。这些特征 称为属性。例如学生通过学号、姓名、性别、系别、年龄、籍贯等属性来描述。
- **域**：每个属性的取值范围对应一个值的集合，称为该属性的域。例如，学 号的域是6位整型数。
- **目或度**：指的是一个关系中属性的个数。
- **候选码**：若关系中的某一属性或属性组的值能唯一的标识一个元组，则称该属性或属性组为候选码。
- **主码**：或称主键，若一个关系有多个候选码，则选定其中一个作为主码。
- **主属性**：包含在任何候选码中的属性称为主属性。不包含在任何候选码中的属性称为非主属性 (Non-Prime Attribute)。
- **外码**：如果关系模式R 中的属性或属性组不是该关系的码，但它是其他关系的码，那么该属性集对关系模式R 而言是外码。
- **全码**：关系模型的所有属性组是这个关系模式的候选码，称为全码。
- **笛卡尔积**

#### (三)、关系数据库模式

> 在数据库中要区分型和值。关系数据库中的型也称为关系数据库模式，是关系数据库结构 的描述。它包括若干域的定义以及在这些域上定义的若干关系模式。关系数据库的值是这些关 系模式在某一时刻对应的关系的集合，通常称之为关系数据库。

#### (四)、关系的完整性约束（实体完整性、参照完整性和用户定义完整性）

> 完整性规则提供了一种手段来保证当授权用户对数据库做修改时不会破坏数据的一致性。 因此，完整性规则防止的是对数据的意外破坏。关系模型的完整性规则是对关系的某种约束条 件。

- **实体完整性**： 实体完整性规则要求每个数据表都必须有主键，而作 为主键的所有字段，其属性必须是唯一且非空值。
- **参照完整性**：现实世界中的实体之间往往存在某种联系，在关 系模型中实体及实体间的联系是用关系来描述的，这样自然就存在着关系与关系间的引用。
- **用户定义完整性**： 就是针对某一具体的关系数据库的约束条 件，反映某一具体应用所涉及的数据必须满足的语义要求，由应用的环境决定。



### 二、关系运算

#### (一)、集合运算符

1. **并**

   关系 R 与 S 具有相同的关系模式，即 R 与 S 的元数相同(结构相同)。关系 R 与 S 的并由 属于R 或属于S 的元组构成的集合组成，记作R U S

2. **差**

   关系 R 与 S 具有相同的关系模式，关系 R 与 S 的差是由属于 R 但不属于S 的元组构成的集 合，记作R - S

3. **交**

   关系R 与S 具有相同的关系模式，关系R 与S 的交是由属于R 同时又属于S 的元组构成的 集合，关系R 与 S 的交可记为R∩S

4. **笛卡尔积 【重点】**

   两个元数分别为n 目和m 目的关系R 和S 的广义笛卡尔积是一个 (n+m) 列的元组的集 合。元组的前n 列是关系R 的一个元组，后m 列是关系S 的一个元组，记作R×S

#### (二)、专门的关系运算符

1. **选择 【重点】**

   选择运算是从关系的水平方向进行运算，是从关系 R 中选择满足给定条件的诸元组，记作 σp(R)

2. **投影 【重点】**

   投影运算是从关系的垂直方向进行运算，在关系R 中选择出若干属性列A 组成新的关系， 记作π?(R

3. **连接 【重点】**

   连接分为θ连接、等值连接及自然连接3种。连接运算是从两个关系R 和S 的笛卡尔积中 选取满足条件的元组。因此，可以认为笛卡尔积是无条件连接，其他的连接操作是有条件连接。

4. **除**

   除运算同时从关系的水平方向和垂直方向进行运算。给定关系 R(X,Y) 和 S(Y,Z), X、Y、Z为属性组。 R÷S应当满足元组在X 上的分量值x的象集Y,包含关系S 在属性组Y上投 影的集合。

   > 外连接运算是连接运算的扩展，可以处理缺失的信息。外连接运算有三种:左外连接、右 外连接和全外连接。

#### (三)、算术比较符

1. **大于**
2. **大于等于**
3. **小于**
4. **小于等于**
5. **等于**
6. **不等于**

#### (四)、逻辑运算符

1. **与**
2. **或**
3. **非**

### 三、关系数据库设计基本理论

#### (一)、函数依赖、多值依赖和规范化

1. **函数依赖**

   > 数据依赖是通过一个关系中属性间值的相等与否体现出来的数据间的相互关系，是现实世 界属性间联系和约束的抽象，是数据内在的性质，是语义的体现。函数依赖则是一种最重要、 最基本的数据依赖。

2. **多值依赖**

   > 若关系模式R(U) 中，XYZ是U的子集，并且Z=U-X-Y当且仅当对R(U) 的任何一个关系 r, 给定一对(x, z) 值，有一组 Y 的值，这组值只由x值决定而与 z 值无关， 则称 “Y多值依赖于X”或 “X多值决定 Y”成立。记为: X→→Y。

   - 多值依赖具有对称性：即若X→→Y,则X→→Z,其中Z=U-X-Y
   - 多值依赖具有传递性。即若X→→Y,Y→→Z,则X→→Z-Y。
   - 函数依赖可以看成是多值依赖的特殊情况。
   - 若X→→Y,X→→Z, 则X→→YZ
   - 若X→→Y,X→→Z, 则X→→Y∩Z。
   - 若X→→Y,X→→Z, 则X→→Z-Y。

3. **规范化 【重点】**

   > 关系数据库设计的方法之一就是设计满足适当范式的模式，通常可以通过判断分解后的模 式达到几范式来评价模式规范化的程度。范式有: INF、2NF、3NF、BCNF、4NF和5NF, 其 中INF级别最低。

   1. **1 NF**

      若关系模式R 的每一个分量都是不可再分的数据项，则关系模式R 属于第一范式。记为 R∈1NF。

   2. **2 NF**

      若关系模式R 1NF, 且每一个非主属性完全依赖于码，则关系模式R 2NF 换句话说，当1N F消除了非主属性对码的部分函数依赖，则称为2NF。

   3. **3 NF**

      若关系模式R(U,F) 中不存在这样的码X, 属性组 Y及非主属性Z(ZeY) 使得X→Y,(Y+X)Y→Z成立，则关系模式R∈3NF。

   4. **BONF**

      关系模式R∈INF, 若X → Y且Y∈X时，X 必含有码，则关系模式R∈BCNF。 也就是说，当3N F 消除了主属性对码的部分函数依赖和传递函数依赖，则称为 BCNF。

   5. **4 NF**

      关系模式R∈lNF, 若对于R的每个非平凡多值依赖X→→Y且Y≠X时，X必含有码，则关系模式 R(U,F)∈4NF。
      4 N F 是限制关系模式的属性间不允许有非平凡且非函数依赖的多值依赖。

