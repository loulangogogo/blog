## 云原生架构相关技术

### 一、容器技术

> **容器技术的背景与价值**
>
> 容器作为标准化软件单元，它将应用及其所有的依赖打包，使应用不受环境限制，在不同计算环境间快速、可靠的运行。

> [!TIP]
>
> **容器编排**
>
> Kubernetes已经成为容器编排的事实标准，被广泛应用于自动部署，扩展和管理容器化应用。Kubernetes 提供了分布式应用管理的核心能力。
>
> - 资源调度
> - 应用部署与管理
> - 自动修复
> - 服务发现与负载均衡
> - 弹性伸缩
> - 声明是API
> - 可扩展性架构
> - 可移植性

### 二、云原生微服务技术

> **微服务的发展背景**
>
> 过去开发一个后端应用最为直接的方式就是通过单一后端应用提供并集成所有的服务，即单体模式。随着业务发展与需求的不断增加，单体应用功能愈发复杂，参与开发的工程师规模可能由最初几个人发展到十几个人，应用迭代效率由于集中式研发、测试、发布、沟通模式而显著下滑。为了解决由单体应用模型衍生的过度集中式项目迭代流程，微服务模式应运而生。
>
> 微服务模式将后端单体应用拆分为松耦合的多个子应用，每个子应用负责一组子功能。这些子应用称为“微服务”，多个“微服务”共同形成了一个物理独立但逻辑完整的分布式微服务体系。

> [!TIP]
>
> **微服务设计约束**
>
> - 微服务个体约束
>   - 一个设计良好的微服务应用，所完成的功能在业务领域上应是相互独立的。微服务的“微”并不是为了微而微，而是按照问题域对单体应用做合理拆分。
> - 微服务与微服务之间的横向关系
>   - 在合理划分好微服务间的边界后，主要从微服务的可发现性和可交互性处理服务间的横向关系。
> - 微服务与数据层之间的纵向约束
>   - 在微服务领域，要注意数据存储隔离原则，即数据是微服务的私有资产，对于该数据的访问都必须通过当前微服务提供的api来进行访问。否则，则造成数据层产生耦合，违背了高内聚低耦合的原则。
>   - 对于有数据存取（即有状态）的微服务而言，通常使用计算与存储分离方式，将数据下沉到分布式存储，通过这个方式做到一定程度的无状态化。
> - 全局视角下的微服务分布式约束
>   - 从微服务系统设计一开始，就需要考虑以下因素:高效运维整个系统，从技术上要准备全 自动化的 C I / C D 流水线满足对开发效率的诉求，并在这个基础上支持蓝绿、金丝雀等不同发布 策略，以满足对业务发布稳定性的诉求

> [!TIP]
>
> **主要微服务技术**
>
> - Apache Dubbo作为源自阿里巴巴的一款开源高性能R P C框架，特性包括基于透明接口的 RPC、 智能负载均衡、自动服务注册和发现、可扩展性高、运行时流量路由与可视化的服务治 理。经过数年发展已是国内使用最广泛的微服务框架并构建了强大的生态体系
> - Spring Cloud作为开发者的主要微服务选择之一，为开发者提供了分布式系统需要的配置 管理、服务发现、断路器、智能路由、微代理、控制总线、一次性 Token、 全局锁、决策竞选、分布式会话与集群状态管理等能力和开发工具。
> - Eclipse MicroProfile作为Java微服务开发的基础编程模型，它致力于定义企业Java微服务规范， MicroProfile提供指标、 API文档、运行状况检查、容错与分布式跟踪等能力，使用它创 建的云原生微服务可以自由地部署在任何地方，包括服务网格架构。
> - Tars是腾讯将其内部使用的微服务框架TAF(Total Application Framework) 多年的实践成 果总结而成的开源项目，在腾讯内部有上百个产品使用，服务内部数千名 C++、Java、Golang、 Node.Js与PHP开发者
> - SOFAStack(Scalable Open Financial Architecture Stack) 是由蚂蚁金服开源的一套用于快速构建金融级分布式架构的中间件，也是在金融场景里的最佳实践。
> - DAPR(Distributed Application Runtime, 分布式应用运行时)是微软新推出的一种可移植 的、无服务器的、事件驱动的运行时，它使开发人员可以轻松构建弹性，无状态和有状态微服 务，这些服务运行在云和边缘上，并包含多种语言和开发框架。

### 三、无服务器技术

> 随着Kubernetes代表的云原生技术称为云计算的容器界面，Kubernetes称为云计算的新一代操作系统。面相特定领域的后端服务（BaaS）则是这个操作系统上的服务API,存储数据库、中间件、大数据、AI等领域的大量产品与技术都开始提供全托管的云形态服务，如今越来越多的用户已经习惯使用云服务，而不是自己搭建存储系统、部署数据库软件。

> [!tip]
>
> **Serverless计算包含以下特征：**
>
> - **全托管的计算服务**：客户只需要编写代码构建应用，无需关注同质化的、负担繁重的基于服务器等基础设施的开发、运维、安全、高可用等工作。
> - **通用性**：结合云BaaSAPI的能力，能够支撑云上所有重要类型的应用。
> - **自动弹性伸缩**：让用户无需为资源使用提前进行容量规划。
> - **按量计费**：让企业使用成本有效降低，无需为闲置资源付费。

> [!TIP]
>
> **技术关注点**
>
> - 计算资源弹性调度
> - 负载均衡和流控
> - 安全性

### 四、服务网格

> 服务网格是分布式应用在微服务软件架构上发展起来的新技术，旨在将那些微服务间的连接、安全、流量控制和可观测等通用功能下沉为平台基础设施，实现应用于平台基础设置的解耦。
