## 系统架构评估

### 一、系统架构评估中的重要概念

##### （一）、架构评估的基本概念

> 系统架构评估是在对架构分析、评估的基础上，对架构策略的选取进行决策。它利用数学或逻辑分析的技术，针对系统的一致性、正确性、质量属性、规划结果等不同方面，提供描述性、预测性和指令性的分析结果。

##### （二）、核心概念（敏感点和权衡点、风险承担者（利益相关人）和场景）

1. **敏感点 (Sensitivity Point) 和权衡点 (Tradeoff Point)**。敏感点和权衡点是关键的架构 决策。敏感点是一个或多个构件(和/或构件之间的关系)的特性。研究敏感点可使设计人员 或分析员明确在搞清楚如何实现质量目标时应注意什么。权衡点是影响多个质量属性的特性， 是多个质量属性的敏感点。
2. **风险承担者 (Stakeholders) 或者称为利益相关人**。 系统的架构涉及很多人的利益，这 些人都对架构施加各种影响，以保证自己的目标能够实现
3. **场景 (scenarios)**。 在进行架构评估时，一般首先要精确地得出具体的质量目标，并 以之作为判定该架构优劣的标准。为得出这些目标而采用的机制称之为场景。场景是从风险 承担者的角度对与系统的交互的简短描述。在架构评估中，一般采用刺激 (Stimulus)、 环 境 (Environment) 和响应 (Response) 三方面来对场景进行描述

##### （三）、架构评估方法的分类（基于调查问卷或检查表的方式、基于场景的方式和基于度量的方式）

1. **基于调查问卷或检查表的方法**。该方法的关键是要设计好问卷或检查表，充分利用系统相关人员的经验和知识，获得对架构的评估。该方法的缺点是在很大程度上依赖于评估人员 的主观推断。
2. **基于场景的评估方法**。基于场景的方式由卡耐基梅隆大学软件工程研究所首先提出 并应用在架构权衡分析法 (Architecture Tradeoff Analysis Method,ATAM) 和软件架构分析方法 (Software ArchitectureAnalysis Method,SAAM) 中。它是通过分析软件架构对场景(也就是对系 统的使用或修改活动)的支持程度，从而判断该架构对这一场景所代表的质量需求的满足程度。
3. **基于度量的评估方法**。它是建立在软件架构度量的基础上的，涉及3个基本活动，首 先需要建立质量属性和度量之间的映射原则，然后从软件架构文档中获取度量信息，最后根据映射原则分析推导出系统的质量属性。

### 二、系统架构评估方法

#### （一）、非功能质量属性的架构分析方法 **（SAAM）**

> 最初它用于比较不同软件体系的架构，以分析 系统架构的可修改性，后来实践证明它也可用于其他质量属性如可移植性、可扩充性等，最终 发展成了评估一个系统架构的通用方法。

1. **特定目标**。 SAAM 的目标是对描述应用程序属性的文档，验证基本的架构假设和原则。
2. **评估技术**。 SAAM所使用的评估技术是场景技术。场景代表了描述架构属性的基础， 描述了各种系统必须支持的活动和可能存在的状态变化。
3. **质量属性**。这一方法的基本特点是把任何形式的质量属性都具体化为场景，但可修改 性是 SAAM 分析的主要质量属性。
4. **风险承担者**。 SAAM 协调不同参与者之间感兴趣的共同方面，作为后续决策的基础， 达成对架构的共识。
5. **架构描述**。SAAM 用于架构的最后版本，但早于详细设计。架构的描述形式应当被所 有参与者理解。功能、结构和分配被定义为描述架构的3个主要方面。
6. **方法活动**。 SAAM 的主要输入是问题描述、需求声明和架构描述。图8-1描绘了 SAAM 分析活动的相关输入及评估过程。
7. **已有知识库的可重用性**: SAAM 不考虑这个问题。
8. **方法验证**: SAAM是一种成熟的方法，已被应用到众多系统中，这些系统包括空中交 通管制、嵌入式音频系统、 WRCS (修正控制系统)、 KWIC(根据上下文查找关键词系统)等。

#### （二）、架构权衡分析方法 **（ATAM）**

> 架构权衡分析方法 (Architecture Tradeoff Analysis Method,ATAM) 是 在 S A A M的基础上 发展起来的，主要针对性能、实用性、安全性和可修改性，在系统开发之前，对这些质量属性 进行评价和折中。

1. **特定目标**。 ATAM 的目标是在考虑多个相互影响的质量属性的情况下，从原则上提供 一种理解软件架构的能力的方法。
2. **质量属性**。 ATAM 方法分析多个相互竞争的质量属性。开始时考虑的是系统的可修改 性、安全性、性能和可用性。
3. **风险承担者**。在场景、需求收集相关活动中， ATAM 方法需要所有系统相关人员的 参与。
4. **架构描述**。架构空间受到历史遗留系统、互操作性和以前失败的项目约束。
5. **评估技术**。可以把 ATAM 方法视为一个框架，该框架依赖于质量属性，可以使用不同 的分析技术。
6. **方法的活动**。 ATAM 被分为4个主要的活动领域(或阶段),分别是场景和需求收集、 架构视图和场景实现、属性模型构造和分析、折中。
7. **领域知识库的可重用性**。领域知识库通过基于属性的架构风格 (Attribute Based Architecture Style) 维护。
8. **方法验证**。该方法已经应用到多个软件系统，但仍处在研究之中。

#### （三）、成本效益分析发 **（CBAM）**

> 在大型复杂系统的构建过程中，经济性通常是需要考虑的首要因素。因此，需要从经济角 度建立成本、收益、风险和进度等方面软件的“经济”模型。成本效益分析法 (the Cost Benefit Analysis Method,CBAM) 是在 ATAM上构建，用来对架构设计决策的成本和收益进行建模， 是优化此类决策的一种手段。 CBAM 的思想就是架构策略影响系统的质量属性，反过来这些质 量属性又会为系统的项目干系人带来一些收益(称为“效用”), CBAM 协助项目干系人根据其 投资回报 (Return On Investment,ROI) 选择架构策略。 CBAM 在 ATAM 结束时开始，它实际上使用了 ATAM 评估的结果。

1. 整理场景。整理 ATAM 中获取的场景，根据商业目标确定这些场景的优先级，并选取优先级最高的1/3的场景进行分析。
2. 对场景进行求精。为每个场景获取最坏情况、当前情况、期望情况和最好情况的质量属性响应级别。
3. 确定场景的优先级。项目关系人对场景进行投票，其投票是基于每个场景“所期望的”响应值，根据投票结果和票的权值，生成一个分值(场景的权值)。
4. 分配效用。对场景的响应级别(最坏情况、当前情况、期望情况和最好情况)确定效用表。
5. 架构策略涉及哪些质量属性及响应级别，形成相关的“策略一场景一响应级别”的对应关系。
6. 使用内插法确定“期望的”质量属性响应级别的效用。即根据第4步的效用表以及第5步的对应关系，确定架构策略及其对应场景的效用表。
7. 计算各架构策略的总收益。根据第3步的场景的权值及第6步的架构策略效用表，计 算出架构策略的总收益得分。
8. 根据受成本限制影响的 ROI 选择架构策略。根据开发经验估算架构策略的成本，结合 第7步的收益，计算出架构策略的 ROI, 按 ROI 排序，从而确定选取策略的优先级。

#### （四）、其他评估方法 （如 SAEM、SAABNet 和 SACMM 等）

SAAM、ATAM 和 CBAM 方法是架构评估中被公认的3种方法。

其他方法包括：

- **SAEM**：将软件架构看作一个最终产品以及设计过程中的一个中间产品，从外部质量 属性和内部质量属性两个角度来阐述它的评估模型，旨在为软件架构的质量评估创建一个基础框架。
- **SAABNet**：软件架构定性的评估技术依赖于专家知识，包括某些特定类型问题的解决方案以及可能的 诱导因素、统计知识(如60%的系统消耗花费在维护上)、审美观等，这些定性的知识比较含 糊且难以文档化。 SAABNet是一种用来表达和使用定性知识以辅助架构的定性评估。
- **SACCM**：是一种软件架构修改的度量方法，首先基于图内核定义差异度量准则来计算两个软件架构之间的距离，图内核的基本思想是将结构化的对象描述为它的子结构的集合，通过子结构的配对比较来分析对象之间的相似性。
- SASAM：通过对预期架构(架构设计阶段的相关描述材料)和实际架构(源代码中 执行的架构)进行映射和比较来静态地评估软件架构，并将静态评估与架构开发方法 PuLSE- DSSA 结合，识别出10种不同的目的和需求来指导静态的架构评估。
- **ALRRA**：是一种软件架构可靠性风险评估方法，该方法使用动态复杂度准则和动态耦合度准则来定义组件 和连接件的复杂性因素，其中，动态复杂度准则在某个场景的执行中分析组件的动态行为来度 量组件的复杂性，动态耦合度准则在某个场景的执行中分析连接件的消息传递协议来度量连接件的复杂性。
- **AHP**：在软件架构评估量化方式中，层次分析法 (Analytical Hierarchy Process,AHP) 是多种架构 评估度量方法的基础理论。
- **COSM C+UML**：基于面向对象系统源代码的可维护性度量准则(包括复杂度、耦合度和内聚度的度量准 则), Anjos等人提出了基于度量模型来评估软件架构可维护性的方法。针对不同表达方式的软 件架构，采用统一的软件度量COSMIC方法来进行度量和评估
